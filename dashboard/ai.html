<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="description"
    content="Learn about smart indoor hydrophobic farming and its innovative approach to sustainable crop production." />
  <!-- Boxicons -->
  <link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <!-- My CSS -->
  <link rel="stylesheet" href="style.css" />
  <link rel="shortcut icon" href="img/logo.png" type="image/x-icon" />

  <title>SIHF</title>
</head>

<body>
  <style>
    .dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      margin: 10px;
      width: 200px;
      padding: 10px;
      background-color: #fff;
      border: 1px solid #ccc;
    }

    .dropdown::before {
      position: inherit;
      content: "";
      padding: 10px;
      background-color: rgb(255, 255, 255);
      top: -10px;
      left: 130px;
      align-content: center;
      align-self: center;
      border-radius: 0px 100px 100px 0px;
    }

    .notification-list {
      display: flex;
      flex-direction: column;
    }

    .dropdown-item {
      background-color: gery;
    }

    .hide {
      display: none !important;
    }
  </style>

  <!-- SIDEBAR -->
  <section id="sidebar">
    <a href="/" class="brand">
      <i class="bx"><img src="img/logo.png" alt="logo" /> </i>
      <span class="text">SIHF</span>
    </a>
    <span class="brand-text">Smart Hydroponic Farming</span>
    <ul class="side-menu top">
      <li >
        <a href="./index.html">
          <i class="bx bxs-dashboard"></i>
          <span class="text">Dashboard</span>
        </a>
      </li>
      <li>
        <a href="./control.html">
          <i class="bx bi bi-sliders"></i>
          <span class="text">Control</span>
        </a>
      </li>

      <li>
        <a href="./status.html">
          <i class="bx bi bi-card-checklist"></i>
          <span class="text">Status</span>
        </a>
      </li>
      <li>
        <a href="./notify.html">
          <i class="bx bi bi-bell"></i>
          <span class="text">Notification</span>
        </a>
      </li>
      <li li class="active">
        <a href="./ai.html">
          <i class="bx bi bi-lightbulb"></i>
          <span class="text">Ai Feed</span>
        </a>
      </li>
    </ul>
    <ul class="side-menu">
      <li>
        <a href="./config.html">
          <i class="bx bi bi-gear"></i>

          <span class="text">Config</span>
        </a>
      </li>
      <li>
        <a href="#" class="logout">
          <i class="bx bi bi-box-arrow-left"></i>

          <span class="text">Logout</span>
        </a>
      </li>
    </ul>
  </section>
  <!-- SIDEBAR -->

  <!-- CONTENT -->
  <section id="content">
    <!-- NAVBAR -->
    <nav>
      <i class="bx bx-menu"></i>

      <form action="#">
        <div class="form-input">
          <input type="search" placeholder="Search..." />
          <button type="submit" class="search-btn">
            <i class="bx bx-search"></i>
          </button>
        </div>
      </form>
      <input type="checkbox" id="switch-mode" hidden />
      <label for="switch-mode" class="switch-mode"></label>
      <a href="notify.html" class="notification" onclick="hideNotfication()">
        <i class="bx bxs-bell"></i>
        <span class="num">8</span>
      </a>

      <a href="./ai.html" class="profile">
        <i class="bx bxs-cog"></i>
      </a>
    </nav>
    <!-- NAVBAR -->

    <!-- MAIN -->
    <main>
      <img src="img/hero.jpg" class="img-fluid img-thumbnail" alt="Responsive image" />
      <div class="head-title">
        <div class="left">
          <h1>Ai Feed</h1>
          <ul class="breadcrumb">
            <li>
              <a href="/">Dashboard</a>
            </li>
            <li><i class="bx bx-chevron-right"></i></li>
            <li>
              <a class="active" href="#">Home</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="table-data">
        <div class="todo">
          
          <ul class="todo-list">



  <!-- Add importmap for Google Generative AI -->
  <script type="importmap">
  {
    "imports": {
      "@google/generative-ai": "https://esm.run/@google/generative-ai"
    }
  }
</script>

  <!-- Display area for the generated story -->
  <div id="storyOutput" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;"></div>

  <script type="module">
    // Import GoogleGenerativeAI from the provided package
    import { GoogleGenerativeAI } from "@google/generative-ai";

    // Replace 'YOUR_API_KEY' with your actual API key
    const API_KEY = "AIzaSyBirEfJhisakatvUv3SqWNG8Q3o6E-S2iI";
    const genAI = new GoogleGenerativeAI(API_KEY);
    // const plantName = "cabagge";
    // Retrieve the data from local storage
    var data = JSON.parse(localStorage.getItem('settings'));

    // Use the location as the query
    var plantName = data.plant;
 
  
      document.getElementById('storyOutput').innerText = `Please wait patiently as I gather the necessary information about ${plantName} and formulate a thorough response that will assist you in your quest for optimal cultivation. of ${plantName}`


    // Function to generate a story and display it
    async function generateStory() {
      const model = genAI.getGenerativeModel({ model: "gemini-pro" });
      // Construct the prompt string using template literals
      const prompt = `Write the best conditions on how to grow a ${plantName}, including the best humidity,temperature, light conditions, air pressure, best practices, cultivation techniques, nutrients found, prefereble soil type, soil pH, soil texture,water level and more, and provide a well-structured paragraph. Use bullet points for the best practices and cultivation techniques detailed explanation  and how to grow it indoor using hydrophonic methods because we have a hydrophonic farm that have 2 layers and fan tempreture sensor and led how much it grow per person and per seed. do the calculation for four pots of hydrophonic pots do the calculation also give minimum and maximum treshold for humidity and tempreture `;

      try {
        const result = await model.generateContent(prompt);
        const response = await result.response;
        const text = response.text();
        

        // Display the generated story in the div with id "storyOutput"
        document.getElementById('storyOutput').innerText = text;
        
      } catch (error) {
        console.error("Error generating story:", error);
        document.getElementById('storyOutput').innerText = "An error occurred while generating the story.";
      }
    }

    // Immediately call the generateStory function when the script loads
    generateStory();
  </script>

          </ul>
        </div>
      </div>
      <div class="Suggestion">
        <img src="img/banner3.jpg" class="img-fluid img-thumbnail" alt="ai image" />
        <div class="head-title">
          <div class="left">
            <a href="./ai.html"><h1>AI Suggestion</h1></a>
            <ul class="breadcrumb">
              <li>
                <a href="./ai.html">See AI Suggestions for Your Farming</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </main>
    <!-- MAIN -->
  </section>
  <!-- CONTENT -->

  <script src="js/script.js"></script>
  <script src="app.js"></script>
  <script src="configuration.js"></script>
  <script>
    function hideNotfication() {
      const notification = document.querySelector("#notify");
      notification.classList.add = "hide";
    }
  </script>
</body>

</html>